<html>
<head>
	<style type="text/css">
		html {
			scroll-behavior: smooth;
		}
		body {
			background-color: #2D3338;
			color: #FFF;
		}
		a {
			color: #000;
		}

		* {
			scrollbar-width: thin;
			scrollbar-color: #6C757D transparent;
		}

		*::-webkit-scrollbar {
			width: 6px;
			height: 6px;
		}

		*::-webkit-scrollbar-track {
			background: transparent;
		}

		*::-webkit-scrollbar-thumb {
			background-color: #6C757D;
		}
		.container {
			border: 1px white solid;
			border-radius: 5px;
			display: block;
			margin: 10px auto;
			padding: 20px;
			width: 700px;
		}
		#generate {
			width: 100%;
			padding: 10px;
		}
		.table {
			width: 100%;
			color: #FFF;
		}
		#hashinputlabel {
			width: 50px;
		}
		#hashinput {
			width: calc(100% - 50px);
		}
		#hashoutput {
			background-color: #6C757D;
			border-radius: 5px;
			padding: 10px;
			margin: 10px;
		}
	</style>
</head>
<body>
	<div class='container'>
		<label for='hashinput' id='hashinputlabel'>Input</label>
		<input type='text' id='hashinput' name='hashinput' oninput='DOM_computehash()'>
		<br><br>
		<span id='hashoutput'></span>
	</div>
	<div class='container'>

		<label for='hashseed' id='hashseedlabel'>Seed</label>
		<input type='text' id='hashseed' name='hashseed' value='abc' oninput='DOM_generate()'>
		<label for='numhashes' id='numhasheslabel'>Number of hashes</label>
		<input type='number' id='numhashes' name='numhashes' value='100'>
		<br><br>

		<button id='generate' onclick='DOM_generate()'>Generate chain</button>
		<hr>
		<table id='output' class='table'>
			<!-- <tr><td>Order</td><td>Hash</td></tr> -->
		</table>
	</div>
</body>
<script type="text/javascript">
	let chain = [];

	// Use the 256-bit secure hashing algorithm (SHA256) by calling sha256('data string')
	const sha256 = function a(b) {function c(a,b) {return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o= {},p=2;64>n;p++)if(!o[p]) {for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\x80";b[h]%64-56;)b+="\x00";for(d=0;d<b[h];d++) {if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];) {var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++) {var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--) {var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};

	function generate(seed, quantity) {
		let chain = [];
		let prev_hash = seed.toString();
		for(let i = 0; i < quantity; i++) {
			let hash = sha256(prev_hash);
			chain.unshift(hash);
			prev_hash = hash;
		}
		return chain;
	}

	function DOM_generate() {
		let seed = document.getElementById('hashseed').value;
		let quantity = parseInt(document.getElementById('numhashes').value);
		chain = generate(seed, quantity);
		console.log(chain)

		let html = '<tr><td>Usage index</td><td>Hash</td></tr>';

		for(let i = 0; i < chain.length; i++) {
			index = (i + 1).toString() + (i == 0 ? 'st' : (i == 1 ? 'nd' : (i == 2 ? 'rd' : 'th')));
			html += '<tr><td>' + index + '</td><td>' + chain[i] + '</td></tr>';
		}
		let table = document.getElementById('output');
		table.innerHTML = html;
	}

	function DOM_computehash() {
		document.getElementById('hashoutput').innerText = sha256(document.getElementById('hashinput').value);
	}


	DOM_computehash();
	DOM_generate();
</script>
</html>